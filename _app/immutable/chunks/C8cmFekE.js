import{t as g,a as m,c as q,b as z}from"./DTfCIiy5.js";import{p as S,t as v,a as k,c as h,r as u,f as x,s as B}from"./BnUth-Uv.js";import{s as F}from"./LY2jiD0Q.js";import{i as G}from"./D0hZ39Xq.js";import{c as I,b as T,s as H,C as J}from"./D9czmhex.js";import{e as K}from"./CGgsTO9Y.js";import{p as M}from"./cI3lZ4Qq.js";import{o as N}from"./CA0DrnDX.js";import{p as O}from"./CQV2zS4M.js";import{b as P}from"./-VfZGcce.js";import{s as Q}from"./QeaNnfvq.js";import{a as R,i as U,H as V}from"./BR1DJub3.js";import{d as y}from"./4Qm1WOh4.js";const C=I();var W=g("<section><!></section>");function fe(_,e){S(e,!0);const o=y.get();let a;C.set(t=>{a=t});var r=W();let i;var n=h(r);T(n,()=>e.children),u(r),R(r,(t,f)=>{var d;return(d=U)==null?void 0:d(t,f)},()=>({intersecting:t})=>{a&&(t?o.slugs_onscreen.add(a):o.slugs_onscreen.delete(a))}),v(()=>i=H(r,i,{...e.attrs})),m(_,r),k()}let X=0;var Y=g("<div><!></div> <!>",1),Z=g("<header><!></header>");function le(_,e){S(e,!0);const o=M(e,"tag",3,"h3"),a=Q(e.text),r=C.get();if(!r)throw Error("Tome_Section_Header must be a child of Tome_Section");r(a);const i="tome_section_header_"+X++,n=y.get();O.url.pathname!==P+n.root_path&&(n.add(i,e.text,a,o()),N(()=>{n.remove(i)}));var t=Z(),f=h(t);K(f,o,!1,(d,w)=>{let p;v(()=>p=H(d,p,{...e.attrs,[J]:{tome_section_header:!0}},"svelte-3vtdd8"));var b=Y(),l=x(b),A=h(l);{var D=s=>{var c=q(),j=x(c);T(j,()=>e.children),m(s,c)},E=s=>{var c=z();v(()=>F(c,e.text)),m(s,c)};G(A,s=>{e.children?s(D):s(E,!1)})}u(l);var L=B(l,2);V(L,{slug:a}),m(w,b)}),u(t),m(_,t),k()}export{fe as T,le as a};
