import type {Gen} from '@ryanatkn/gro';

import style_reset from '$lib/style_reset.css?raw';
import style_components from '$lib/style_components.css?raw';
import style_animations from '$lib/style_animations.css?raw';

/**
 * Concatenates the `.css` files into `style.css` as a convenience.
 */
export const gen: Gen = ({origin_path}) => {
	// The style utilities override everything else, so they go last,
	// and some selectors in previous files may need to lower specificity with `:where`.

	const sheets = [
		to_stylesheet('./src/lib/style_reset.css', style_reset),
		to_stylesheet('./src/lib/style_components.css', style_components),
		to_stylesheet('./src/lib/style_animations.css', style_animations),
	];

	const banner = `/* generated by ${origin_path} */`;

	return `${banner}

${sheets.join('\n\n')}

    ${banner}
  `;
};

const to_stylesheet = (path: string, contents: string): string => `
/* @source ${path} */

${contents}

/* end ${path} */\n\n`;
